\doxysection{grid\+Broadphase\+Kernels.\+h}
\hypertarget{grid_broadphase_kernels_8h_source}{}\label{grid_broadphase_kernels_8h_source}\index{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/Bullet3OpenCL/BroadphaseCollision/kernels/gridBroadphaseKernels.h@{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/Bullet3OpenCL/BroadphaseCollision/kernels/gridBroadphaseKernels.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//this\ file\ is\ autogenerated\ using\ stringify.bat\ (premake\ -\/-\/stringify)\ in\ the\ build\ folder\ of\ this\ project}}
\DoxyCodeLine{00002\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ gridBroadphaseCL\ =}
\DoxyCodeLine{00003\ \ \ \ \ \textcolor{stringliteral}{"{}int\ getPosHash(int4\ gridPos,\ \_\_global\ float4*\ pParams)\(\backslash\)n"{}}}
\DoxyCodeLine{00004\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int4\ gridDim\ =\ *((\_\_global\ int4*)(pParams\ +\ 1));\(\backslash\)n"{}}}
\DoxyCodeLine{00006\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ gridPos.x\ \&=\ gridDim.x\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ gridPos.y\ \&=\ gridDim.y\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{00008\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ gridPos.z\ \&=\ gridDim.z\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{00009\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ hash\ =\ gridPos.z\ *\ gridDim.y\ *\ gridDim.x\ +\ gridPos.y\ *\ gridDim.x\ +\ gridPos.x;\(\backslash\)n"{}}}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ return\ hash;\(\backslash\)n"{}}}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ \(\backslash\)n"{}}}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{stringliteral}{"{}int4\ getGridPos(float4\ worldPos,\ \_\_global\ float4*\ pParams)\(\backslash\)n"{}}}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int4\ gridPos;\(\backslash\)n"{}}}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int4\ gridDim\ =\ *((\_\_global\ int4*)(pParams\ +\ 1));\(\backslash\)n"{}}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ gridPos.x\ =\ (int)floor(worldPos.x\ *\ pParams[0].x)\ \&\ (gridDim.x\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ gridPos.y\ =\ (int)floor(worldPos.y\ *\ pParams[0].y)\ \&\ (gridDim.y\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ gridPos.z\ =\ (int)floor(worldPos.z\ *\ pParams[0].z)\ \&\ (gridDim.z\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ gridPos;\(\backslash\)n"{}}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{stringliteral}{"{}//\ calculate\ grid\ hash\ value\ for\ each\ body\ using\ its\ AABB\(\backslash\)n"{}}}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{stringliteral}{"{}\_\_kernel\ void\ kCalcHashAABB(int\ numObjects,\ \_\_global\ float4*\ allpAABB,\ \_\_global\ const\ int*\ smallAabbMapping,\ \_\_global\ int2*\ pHash,\ \_\_global\ float4*\ pParams\ )\(\backslash\)n"{}}}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ index\ =\ get\_global\_id(0);\(\backslash\)n"{}}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if(index\ >=\ numObjects)\(\backslash\)n"{}}}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ bbMin\ =\ allpAABB[smallAabbMapping[index]*2];\(\backslash\)n"{}}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ bbMax\ =\ allpAABB[smallAabbMapping[index]*2\ +\ 1];\(\backslash\)n"{}}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ pos;\(\backslash\)n"{}}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.x\ =\ (bbMin.x\ +\ bbMax.x)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.y\ =\ (bbMin.y\ +\ bbMax.y)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.z\ =\ (bbMin.z\ +\ bbMax.z)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.w\ =\ 0.f;\(\backslash\)n"{}}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ get\ address\ in\ grid\(\backslash\)n"{}}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int4\ gridPos\ =\ getGridPos(pos,\ pParams);\(\backslash\)n"{}}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ gridHash\ =\ getPosHash(gridPos,\ pParams);\(\backslash\)n"{}}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ store\ grid\ hash\ and\ body\ index\(\backslash\)n"{}}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int2\ hashVal;\(\backslash\)n"{}}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ hashVal.x\ =\ gridHash;\(\backslash\)n"{}}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ hashVal.y\ =\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ pHash[index]\ =\ hashVal;\(\backslash\)n"{}}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{stringliteral}{"{}\_\_kernel\ void\ kClearCellStart(\ int\ numCells,\ \(\backslash\)n"{}}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int*\ pCellStart\ )\(\backslash\)n"{}}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ index\ =\ get\_global\_id(0);\(\backslash\)n"{}}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if(index\ >=\ numCells)\(\backslash\)n"{}}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pCellStart[index]\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{stringliteral}{"{}\_\_kernel\ void\ kFindCellStart(int\ numObjects,\ \_\_global\ int2*\ pHash,\ \_\_global\ int*\ cellStart\ )\(\backslash\)n"{}}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \_\_local\ int\ sharedHash[513];\(\backslash\)n"{}}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ index\ =\ get\_global\_id(0);\(\backslash\)n"{}}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int2\ sortedData;\(\backslash\)n"{}}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if(index\ <\ numObjects)\(\backslash\)n"{}}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ sortedData\ =\ pHash[index];\(\backslash\)n"{}}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ //\ Load\ hash\ data\ into\ shared\ memory\ so\ that\ we\ can\ look\ \(\backslash\)n"{}}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ //\ at\ neighboring\ body's\ hash\ value\ without\ loading\(\backslash\)n"{}}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ //\ two\ hash\ values\ per\ thread\(\backslash\)n"{}}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ sharedHash[get\_local\_id(0)\ +\ 1]\ =\ sortedData.x;\(\backslash\)n"{}}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ if((index\ >\ 0)\ \&\&\ (get\_local\_id(0)\ ==\ 0))\(\backslash\)n"{}}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ //\ first\ thread\ in\ block\ must\ load\ neighbor\ body\ hash\(\backslash\)n"{}}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ sharedHash[0]\ =\ pHash[index-\/1].x;\(\backslash\)n"{}}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ barrier(CLK\_LOCAL\_MEM\_FENCE);\(\backslash\)n"{}}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if(index\ <\ numObjects)\(\backslash\)n"{}}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ if((index\ ==\ 0)\ ||\ (sortedData.x\ !=\ sharedHash[get\_local\_id(0)]))\(\backslash\)n"{}}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ cellStart[sortedData.x]\ =\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{stringliteral}{"{}int\ testAABBOverlap(float4\ min0,\ float4\ max0,\ float4\ min1,\ float4\ max1)\(\backslash\)n"{}}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ return\ \ (min0.x\ <=\ max1.x)\&\&\ (min1.x\ <=\ max0.x)\ \&\&\ \(\backslash\)n"{}}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ (min0.y\ <=\ max1.y)\&\&\ (min1.y\ <=\ max0.y)\ \&\&\ \(\backslash\)n"{}}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ (min0.z\ <=\ max1.z)\&\&\ (min1.z\ <=\ max0.z);\ \(\backslash\)n"{}}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{stringliteral}{"{}//search\ for\ AABB\ 'index'\ against\ other\ AABBs'\ in\ this\ cell\(\backslash\)n"{}}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{stringliteral}{"{}void\ findPairsInCell(\ \ int\ numObjects,\(\backslash\)n"{}}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int4\ \ \ \ gridPos,\(\backslash\)n"{}}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ \ \ \ index,\(\backslash\)n"{}}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int2*\ \ pHash,\(\backslash\)n"{}}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int*\ \ \ pCellStart,\(\backslash\)n"{}}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ float4*\ allpAABB,\ \(\backslash\)n"{}}}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ const\ int*\ smallAabbMapping,\(\backslash\)n"{}}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ float4*\ pParams,\(\backslash\)n"{}}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ volatile\ \ \_\_global\ int*\ pairCount,\(\backslash\)n"{}}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int4*\ \ \ pPairBuff2,\(\backslash\)n"{}}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ maxPairs\(\backslash\)n"{}}}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\(\backslash\)n"{}}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int4\ pGridDim\ =\ *((\_\_global\ int4*)(pParams\ +\ 1));\(\backslash\)n"{}}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ maxBodiesPerCell\ =\ pGridDim.w;\(\backslash\)n"{}}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ gridHash\ =\ getPosHash(gridPos,\ pParams);\(\backslash\)n"{}}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ get\ start\ of\ bucket\ for\ this\ cell\(\backslash\)n"{}}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ bucketStart\ =\ pCellStart[gridHash];\(\backslash\)n"{}}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (bucketStart\ ==\ -\/1)\(\backslash\)n"{}}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\ \ \ //\ cell\ empty\(\backslash\)n"{}}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ //\ iterate\ over\ bodies\ in\ this\ cell\(\backslash\)n"{}}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int2\ sortedData\ =\ pHash[index];\(\backslash\)n"{}}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ unsorted\_indx\ =\ sortedData.y;\(\backslash\)n"{}}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ float4\ min0\ =\ allpAABB[smallAabbMapping[unsorted\_indx]*2\ +\ 0];\ \(\backslash\)n"{}}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ max0\ =\ allpAABB[smallAabbMapping[unsorted\_indx]*2\ +\ 1];\(\backslash\)n"{}}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ handleIndex\ =\ \ as\_int(min0.w);\(\backslash\)n"{}}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ bucketEnd\ =\ bucketStart\ +\ maxBodiesPerCell;\(\backslash\)n"{}}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ bucketEnd\ =\ (bucketEnd\ >\ numObjects)\ ?\ numObjects\ :\ bucketEnd;\(\backslash\)n"{}}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ for(int\ index2\ =\ bucketStart;\ index2\ <\ bucketEnd;\ index2++)\ \(\backslash\)n"{}}}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ int2\ cellData\ =\ pHash[index2];\(\backslash\)n"{}}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (cellData.x\ !=\ gridHash)\(\backslash\)n"{}}}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ break;\ \ \ //\ no\ longer\ in\ same\ bucket\(\backslash\)n"{}}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ int\ unsorted\_indx2\ =\ cellData.y;\(\backslash\)n"{}}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //if\ (unsorted\_indx2\ <\ unsorted\_indx)\ //\ check\ not\ colliding\ with\ self\(\backslash\)n"{}}}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ if\ (unsorted\_indx2\ !=\ unsorted\_indx)\ //\ check\ not\ colliding\ with\ self\(\backslash\)n"{}}}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \{\ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ float4\ min1\ =\ allpAABB[smallAabbMapping[unsorted\_indx2]*2\ +\ 0];\(\backslash\)n"{}}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ float4\ max1\ =\ allpAABB[smallAabbMapping[unsorted\_indx2]*2\ +\ 1];\(\backslash\)n"{}}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ if(testAABBOverlap(min0,\ max0,\ min1,\ max1))\(\backslash\)n"{}}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (pairCount)\(\backslash\)n"{}}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ handleIndex2\ =\ as\_int(min1.w);\(\backslash\)n"{}}}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (handleIndex<handleIndex2)\(\backslash\)n"{}}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ curPair\ =\ atomic\_add(pairCount,1);\(\backslash\)n"{}}}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (curPair<maxPairs)\(\backslash\)n"{}}}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int4\ newpair;\(\backslash\)n"{}}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newpair.x\ =\ handleIndex;\(\backslash\)n"{}}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newpair.y\ =\ handleIndex2;\(\backslash\)n"{}}}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newpair.z\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newpair.w\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pPairBuff2[curPair]\ =\ newpair;\(\backslash\)n"{}}}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{stringliteral}{"{}\_\_kernel\ void\ kFindOverlappingPairs(\ \ \ int\ numObjects,\(\backslash\)n"{}}}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ float4*\ allpAABB,\ \(\backslash\)n"{}}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ const\ int*\ smallAabbMapping,\(\backslash\)n"{}}}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int2*\ pHash,\ \(\backslash\)n"{}}}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int*\ pCellStart,\ \(\backslash\)n"{}}}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ float4*\ pParams\ ,\(\backslash\)n"{}}}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ volatile\ \ \_\_global\ int*\ pairCount,\(\backslash\)n"{}}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_global\ int4*\ \ \ pPairBuff2,\(\backslash\)n"{}}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ maxPairs\(\backslash\)n"{}}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\(\backslash\)n"{}}}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)n"{}}}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int\ index\ =\ get\_global\_id(0);\(\backslash\)n"{}}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if(index\ >=\ numObjects)\(\backslash\)n"{}}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int2\ sortedData\ =\ pHash[index];\(\backslash\)n"{}}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ int\ unsorted\_indx\ =\ sortedData.y;\(\backslash\)n"{}}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ bbMin\ =\ allpAABB[smallAabbMapping[unsorted\_indx]*2\ +\ 0];\(\backslash\)n"{}}}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ bbMax\ =\ allpAABB[smallAabbMapping[unsorted\_indx]*2\ +\ 1];\(\backslash\)n"{}}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ float4\ pos;\(\backslash\)n"{}}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.x\ =\ (bbMin.x\ +\ bbMax.x)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.y\ =\ (bbMin.y\ +\ bbMax.y)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ pos.z\ =\ (bbMin.z\ +\ bbMax.z)\ *\ 0.5f;\(\backslash\)n"{}}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ get\ address\ in\ grid\(\backslash\)n"{}}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int4\ gridPosA\ =\ getGridPos(pos,\ pParams);\(\backslash\)n"{}}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ int4\ gridPosB;\ \(\backslash\)n"{}}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ examine\ only\ neighbouring\ cells\(\backslash\)n"{}}}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ for(int\ z=-\/1;\ z<=1;\ z++)\ \(\backslash\)n"{}}}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ gridPosB.z\ =\ gridPosA.z\ +\ z;\(\backslash\)n"{}}}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ for(int\ y=-\/1;\ y<=1;\ y++)\ \(\backslash\)n"{}}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ gridPosB.y\ =\ gridPosA.y\ +\ y;\(\backslash\)n"{}}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ for(int\ x=-\/1;\ x<=1;\ x++)\ \(\backslash\)n"{}}}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \{\(\backslash\)n"{}}}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gridPosB.x\ =\ gridPosA.x\ +\ x;\(\backslash\)n"{}}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ findPairsInCell(numObjects,\ gridPosB,\ index,\ pHash,\ pCellStart,\ allpAABB,smallAabbMapping,\ pParams,\ pairCount,pPairBuff2,\ maxPairs);\(\backslash\)n"{}}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}

\end{DoxyCode}
