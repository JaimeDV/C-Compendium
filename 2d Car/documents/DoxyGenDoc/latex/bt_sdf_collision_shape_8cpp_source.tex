\doxysection{bt\+Sdf\+Collision\+Shape.\+cpp}
\hypertarget{bt_sdf_collision_shape_8cpp_source}{}\label{bt_sdf_collision_shape_8cpp_source}\index{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/BulletCollision/CollisionShapes/btSdfCollisionShape.cpp@{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/BulletCollision/CollisionShapes/btSdfCollisionShape.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}btSdfCollisionShape.h"{}}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}btMiniSDF.h"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}LinearMath/btAabbUtil2.h"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ ATTRIBUTE\_ALIGNED16(\textcolor{keyword}{struct})}
\DoxyCodeLine{00006\ btSdfCollisionShapeInternalData}
\DoxyCodeLine{00007\ \{}
\DoxyCodeLine{00008\ \ \ \ \ BT\_DECLARE\_ALIGNED\_ALLOCATOR();}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \ \ \ \ btVector3\ m\_localScaling;}
\DoxyCodeLine{00011\ \ \ \ \ btScalar\ m\_margin;}
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{structbt_mini_s_d_f}{btMiniSDF}}\ m\_sdf;}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ btSdfCollisionShapeInternalData()}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ :\ m\_localScaling(1,\ 1,\ 1),}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \ \ m\_margin(0)}
\DoxyCodeLine{00017\ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \ \ \}}
\DoxyCodeLine{00019\ \};}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keywordtype}{bool}\ btSdfCollisionShape::initializeSDF(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ sdfData,\ \textcolor{keywordtype}{int}\ sizeInBytes)}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{bool}\ valid\ =\ m\_data-\/>m\_sdf.load(sdfData,\ sizeInBytes);}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{return}\ valid;}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ btSdfCollisionShape::btSdfCollisionShape()}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \ \ \ \ m\_shapeType\ =\ SDF\_SHAPE\_PROXYTYPE;}
\DoxyCodeLine{00029\ \ \ \ \ m\_data\ =\ \textcolor{keyword}{new}\ btSdfCollisionShapeInternalData();}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{//"{}E:/develop/bullet3/data/toys/ground\_hole64\_64\_8.cdf"{});//ground\_cube.cdf"{});}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{/*unsigned\ int\ field\_id=0;}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ \ Eigen::Vector3d\ x\ (1,10,1);}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ Eigen::Vector3d\ gradient;}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ double\ dist\ =\ m\_data-\/>m\_sdf.interpolate(field\_id,\ x,\ \&gradient);}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ \ \ printf("{}dist=\%g\(\backslash\)n"{},\ dist);}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ btSdfCollisionShape::\string~btSdfCollisionShape()}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{delete}\ m\_data;}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keywordtype}{void}\ btSdfCollisionShape::getAabb(\textcolor{keyword}{const}\ btTransform\&\ t,\ btVector3\&\ aabbMin,\ btVector3\&\ aabbMax)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00045\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00046\ \ \ \ \ btAssert(m\_data-\/>m\_sdf.isValid());}
\DoxyCodeLine{00047\ \ \ \ \ btVector3\ localAabbMin\ =\ m\_data-\/>m\_sdf.m\_domain.m\_min;}
\DoxyCodeLine{00048\ \ \ \ \ btVector3\ localAabbMax\ =\ m\_data-\/>m\_sdf.m\_domain.m\_max;}
\DoxyCodeLine{00049\ \ \ \ \ btScalar\ margin(0);}
\DoxyCodeLine{00050\ \ \ \ \ btTransformAabb(localAabbMin,\ localAabbMax,\ margin,\ t,\ aabbMin,\ aabbMax);}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keywordtype}{void}\ btSdfCollisionShape::setLocalScaling(\textcolor{keyword}{const}\ btVector3\&\ scaling)}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \ \ \ \ m\_data-\/>m\_localScaling\ =\ scaling;}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ \textcolor{keyword}{const}\ btVector3\&\ btSdfCollisionShape::getLocalScaling()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00058\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_data-\/>m\_localScaling;}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ \textcolor{keywordtype}{void}\ btSdfCollisionShape::calculateLocalInertia(btScalar\ mass,\ btVector3\&\ inertia)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00062\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00063\ \ \ \ \ inertia.setValue(0,\ 0,\ 0);}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ btSdfCollisionShape::getName()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00066\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}btSdfCollisionShape"{}};}
\DoxyCodeLine{00068\ \}}
\DoxyCodeLine{00069\ \textcolor{keywordtype}{void}\ btSdfCollisionShape::setMargin(btScalar\ margin)}
\DoxyCodeLine{00070\ \{}
\DoxyCodeLine{00071\ \ \ \ \ m\_data-\/>m\_margin\ =\ margin;}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ btScalar\ btSdfCollisionShape::getMargin()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00074\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_data-\/>m\_margin;}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{keywordtype}{void}\ btSdfCollisionShape::processAllTriangles(\mbox{\hyperlink{classbt_triangle_callback}{btTriangleCallback}}*\ callback,\ \textcolor{keyword}{const}\ btVector3\&\ aabbMin,\ \textcolor{keyword}{const}\ btVector3\&\ aabbMax)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00079\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//not\ yet}}
\DoxyCodeLine{00081\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \textcolor{keywordtype}{bool}\ btSdfCollisionShape::queryPoint(\textcolor{keyword}{const}\ btVector3\&\ ptInSDF,\ btScalar\&\ distOut,\ btVector3\&\ normal)}
\DoxyCodeLine{00084\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{int}\ field\ =\ 0;}
\DoxyCodeLine{00086\ \ \ \ \ btVector3\ grad;}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{double}\ dist;}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{bool}\ hasResult\ =\ m\_data-\/>m\_sdf.interpolate(field,\ dist,\ ptInSDF,\ \&grad);}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (hasResult)}
\DoxyCodeLine{00090\ \ \ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ normal.setValue(grad[0],\ grad[1],\ grad[2]);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ distOut\ =\ dist;}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ hasResult;}
\DoxyCodeLine{00095\ \}}

\end{DoxyCode}
