\doxysection{gim\+\_\+tri\+\_\+collision.\+cpp}
\hypertarget{gim__tri__collision_8cpp_source}{}\label{gim__tri__collision_8cpp_source}\index{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/BulletCollision/Gimpact/gim\_tri\_collision.cpp@{C:/Users/Usuario/Documents/pruebas-\/c/Practica Animación/libraries/bullet-\/3.17/src/BulletCollision/Gimpact/gim\_tri\_collision.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00005\ \textcolor{comment}{/*}}
\DoxyCodeLine{00006\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00007\ \textcolor{comment}{This\ source\ file\ is\ part\ of\ GIMPACT\ Library.}}
\DoxyCodeLine{00008\ \textcolor{comment}{}}
\DoxyCodeLine{00009\ \textcolor{comment}{For\ the\ latest\ info,\ see\ http://gimpact.sourceforge.net/}}
\DoxyCodeLine{00010\ \textcolor{comment}{}}
\DoxyCodeLine{00011\ \textcolor{comment}{Copyright\ (c)\ 2006\ Francisco\ Leon\ Najera.\ C.C.\ 80087371.}}
\DoxyCodeLine{00012\ \textcolor{comment}{email:\ projectileman@yahoo.com}}
\DoxyCodeLine{00013\ \textcolor{comment}{}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ This\ library\ is\ free\ software;\ you\ can\ redistribute\ it\ and/or}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ modify\ it\ under\ the\ terms\ of\ EITHER:}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ \ \ (1)\ The\ GNU\ Lesser\ General\ Public\ License\ as\ published\ by\ the\ Free}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ \ \ \ Software\ Foundation;\ either\ version\ 2.1\ of\ the\ License,\ or\ (at}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ \ \ \ \ \ \ your\ option)\ any\ later\ version.\ The\ text\ of\ the\ GNU\ Lesser}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ \ \ \ \ \ General\ Public\ License\ is\ included\ with\ this\ library\ in\ the}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ \ \ \ \ \ \ file\ GIMPACT-\/LICENSE-\/LGPL.TXT.}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ \ (2)\ The\ BSD-\/style\ license\ that\ is\ included\ with\ this\ library\ in}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ \ \ \ the\ file\ GIMPACT-\/LICENSE-\/BSD.TXT.}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ \ (3)\ The\ zlib/libpng\ license\ that\ is\ included\ with\ this\ library\ in}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ \ \ \ \ \ \ the\ file\ GIMPACT-\/LICENSE-\/ZLIB.TXT.}}
\DoxyCodeLine{00025\ \textcolor{comment}{}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ This\ library\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ but\ WITHOUT\ ANY\ WARRANTY;\ without\ even\ the\ implied\ warranty\ of}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE.\ See\ the\ files}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ GIMPACT-\/LICENSE-\/LGPL.TXT,\ GIMPACT-\/LICENSE-\/ZLIB.TXT\ and\ GIMPACT-\/LICENSE-\/BSD.TXT\ for\ more\ details.}}
\DoxyCodeLine{00030\ \textcolor{comment}{}}
\DoxyCodeLine{00031\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00032\ \textcolor{comment}{*/}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gim__tri__collision_8h}{gim\_tri\_collision.h}}"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ TRI\_LOCAL\_EPSILON\ 0.000001f}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ MIN\_EDGE\_EDGE\_DIS\ 0.00001f}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e}{GIM\_TRIANGLE\_CALCULATION\_CACHE}}}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ GREAL\ margin;}
\DoxyCodeLine{00043\ \ \ \ \ btVector3\ tu\_vertices[3];}
\DoxyCodeLine{00044\ \ \ \ \ btVector3\ tv\_vertices[3];}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classbt_vector4}{btVector4}}\ tu\_plane;}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classbt_vector4}{btVector4}}\ tv\_plane;}
\DoxyCodeLine{00047\ \ \ \ \ btVector3\ closest\_point\_u;}
\DoxyCodeLine{00048\ \ \ \ \ btVector3\ closest\_point\_v;}
\DoxyCodeLine{00049\ \ \ \ \ btVector3\ edge\_edge\_dir;}
\DoxyCodeLine{00050\ \ \ \ \ btVector3\ distances;}
\DoxyCodeLine{00051\ \ \ \ \ GREAL\ du[4];}
\DoxyCodeLine{00052\ \ \ \ \ GREAL\ du0du1;}
\DoxyCodeLine{00053\ \ \ \ \ GREAL\ du0du2;}
\DoxyCodeLine{00054\ \ \ \ \ GREAL\ dv[4];}
\DoxyCodeLine{00055\ \ \ \ \ GREAL\ dv0dv1;}
\DoxyCodeLine{00056\ \ \ \ \ GREAL\ dv0dv2;}
\DoxyCodeLine{00057\ \ \ \ \ btVector3\ temp\_points[MAX\_TRI\_CLIPPING];}
\DoxyCodeLine{00058\ \ \ \ \ btVector3\ temp\_points1[MAX\_TRI\_CLIPPING];}
\DoxyCodeLine{00059\ \ \ \ \ btVector3\ contact\_points[MAX\_TRI\_CLIPPING];}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00062\ \ \ \ \ SIMD\_FORCE\_INLINE\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac7148501d7abedb29153fe729cab4558}{compute\_intervals}}(}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ \&D0,}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ \&D1,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ \&D2,}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ \&D0D1,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ \&D0D2,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ GREAL\ \&scale\_edge0,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ GREAL\ \&scale\_edge1,}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ GUINT\ \&edge\_index0,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ GUINT\ \&edge\_index1)}
\DoxyCodeLine{00072\ \ \ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (D0D1\ >\ 0.0f)}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ here\ we\ know\ that\ D0D2<=0.0\ */}}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ that\ is\ D0,\ D1\ are\ on\ the\ same\ side,\ D2\ on\ the\ other\ or\ on\ the\ plane\ */}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge0\ =\ -\/D2\ /\ (D0\ -\/\ D2);}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge1\ =\ -\/D1\ /\ (D2\ -\/\ D1);}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index0\ =\ 2;}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index1\ =\ 1;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (D0D2\ >\ 0.0f)}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ here\ we\ know\ that\ d0d1<=0.0\ */}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge0\ =\ -\/D0\ /\ (D1\ -\/\ D0);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge1\ =\ -\/D1\ /\ (D2\ -\/\ D1);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index0\ =\ 0;}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index1\ =\ 1;}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (D1\ *\ D2\ >\ 0.0f\ ||\ D0\ !=\ 0.0f)}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ here\ we\ know\ that\ d0d1<=0.0\ or\ that\ D0!=0.0\ */}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge0\ =\ -\/D0\ /\ (D1\ -\/\ D0);}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ scale\_edge1\ =\ -\/D2\ /\ (D0\ -\/\ D2);}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index0\ =\ 0;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ edge\_index1\ =\ 2;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00108\ \ \ \ \ SIMD\_FORCE\_INLINE\ GUINT\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac07d15d399c84583e1c5411a379f85bb}{clip\_triangle}}(}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classbt_vector4}{btVector4}}\ \&tri\_plane,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ *tripoints,}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ *srcpoints,}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ btVector3\ *clip\_points)}
\DoxyCodeLine{00113\ \ \ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ edge\ 0}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classbt_vector4}{btVector4}}\ edgeplane;}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_a4f359987a785fce8ab0f3be33335f9d9}{EDGE\_PLANE}}(tripoints[0],\ tripoints[1],\ tri\_plane,\ edgeplane);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ GUINT\ clipped\_count\ =\ PLANE\_CLIP\_TRIANGLE3D(}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,\ srcpoints[0],\ srcpoints[1],\ srcpoints[2],\ temp\_points);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipped\_count\ ==\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ edge\ 1}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_a4f359987a785fce8ab0f3be33335f9d9}{EDGE\_PLANE}}(tripoints[1],\ tripoints[2],\ tri\_plane,\ edgeplane);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON3D(}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,\ temp\_points,\ clipped\_count,\ temp\_points1);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipped\_count\ ==\ 0)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ edge\ 2}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_a4f359987a785fce8ab0f3be33335f9d9}{EDGE\_PLANE}}(tripoints[2],\ tripoints[0],\ tri\_plane,\ edgeplane);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON3D(}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,\ temp\_points1,\ clipped\_count,\ clip\_points);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ clipped\_count;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*GUINT\ i0\ =\ (tri\_plane.closestAxis()+1)\%3;}}
\DoxyCodeLine{00144\ \textcolor{comment}{\ \ \ \ \ \ \ \ GUINT\ i1\ =\ (i0+1)\%3;}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ edge\ 0}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ \ \ \ \ btVector3\ temp\_points[MAX\_TRI\_CLIPPING];}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \ \ \ \ \ \ btVector3\ temp\_points1[MAX\_TRI\_CLIPPING];}}
\DoxyCodeLine{00148\ \textcolor{comment}{}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ \ \ \ GUINT\ clipped\_count=\ PLANE\_CLIP\_TRIANGLE\_GENERIC(}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ 0,srcpoints[0],srcpoints[1],srcpoints[2],temp\_points,}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ DISTANCE\_EDGE(tripoints[0],tripoints[1],i0,i1));}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00154\ \textcolor{comment}{\ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0)\ return\ 0;}}
\DoxyCodeLine{00155\ \textcolor{comment}{}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ edge\ 1}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON\_GENERIC(}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ 0,temp\_points,clipped\_count,temp\_points1,}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ DISTANCE\_EDGE(tripoints[1],tripoints[2],i0,i1));}}
\DoxyCodeLine{00160\ \textcolor{comment}{}}
\DoxyCodeLine{00161\ \textcolor{comment}{\ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0)\ return\ 0;}}
\DoxyCodeLine{00162\ \textcolor{comment}{}}
\DoxyCodeLine{00163\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ edge\ 2}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON\_GENERIC(}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ 0,temp\_points1,clipped\_count,clipped\_points,}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ DISTANCE\_EDGE(tripoints[2],tripoints[0],i0,i1));}}
\DoxyCodeLine{00167\ \textcolor{comment}{}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ \ \ \ \ return\ clipped\_count;*/}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ SIMD\_FORCE\_INLINE\ \textcolor{keywordtype}{void}\ sort\_isect(}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ GREAL\ \&isect0,\ GREAL\ \&isect1,\ GUINT\ \&e0,\ GUINT\ \&e1,\ btVector3\ \&vec0,\ btVector3\ \&vec1)}
\DoxyCodeLine{00173\ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isect1\ <\ isect0)}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//swap}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__math_8h_a4180c34946b372c111c6b3a41c4a17fe}{GIM\_SWAP\_NUMBERS}}(isect0,\ isect1);}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__math_8h_a4180c34946b372c111c6b3a41c4a17fe}{GIM\_SWAP\_NUMBERS}}(e0,\ e1);}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ btVector3\ tmp\ =\ vec0;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ vec0\ =\ vec1;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ vec1\ =\ tmp;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00197\ \ \ \ \ SIMD\_FORCE\_INLINE\ GUINT\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_a8ce209ccff8cdd7ece72b0465e222a85}{cross\_line\_intersection\_test}}()}
\DoxyCodeLine{00198\ \ \ \ \ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ direction\ of\ intersection\ line}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ edge\_edge\_dir\ =\ tu\_plane.cross(tv\_plane);}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ GREAL\ Dlen;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_abddd1b010b51bfbbca0118e314e14d4b}{VEC\_LENGTH}}(edge\_edge\_dir,\ Dlen);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Dlen\ <\ 0.0001)}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;\ \ \textcolor{comment}{//faces\ near\ paralele}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ edge\_edge\_dir\ *=\ 1\ /\ Dlen;\ \ \textcolor{comment}{//normalize}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ interval\ for\ triangle\ 1}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ GUINT\ tu\_e0,\ tu\_e1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//edge\ indices}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ GREAL\ tu\_scale\_e0,\ tu\_scale\_e1;\ \ \textcolor{comment}{//edge\ scale}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac7148501d7abedb29153fe729cab4558}{compute\_intervals}}(du[0],\ du[1],\ du[2],}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ du0du1,\ du0du2,\ tu\_scale\_e0,\ tu\_scale\_e1,\ tu\_e0,\ tu\_e1))\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ interval\ for\ triangle\ 2}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ GUINT\ tv\_e0,\ tv\_e1;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//edge\ indices}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ GREAL\ tv\_scale\_e0,\ tv\_scale\_e1;\ \ \textcolor{comment}{//edge\ scale}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac7148501d7abedb29153fe729cab4558}{compute\_intervals}}(dv[0],\ dv[1],\ dv[2],}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dv0dv1,\ dv0dv2,\ tv\_scale\_e0,\ tv\_scale\_e1,\ tv\_e0,\ tv\_e1))\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{comment}{//proyected\ vertices}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ btVector3\ up\_e0\ =\ tu\_vertices[tu\_e0].lerp(tu\_vertices[(tu\_e0\ +\ 1)\ \%\ 3],\ tu\_scale\_e0);}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ btVector3\ up\_e1\ =\ tu\_vertices[tu\_e1].lerp(tu\_vertices[(tu\_e1\ +\ 1)\ \%\ 3],\ tu\_scale\_e1);}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ btVector3\ vp\_e0\ =\ tv\_vertices[tv\_e0].lerp(tv\_vertices[(tv\_e0\ +\ 1)\ \%\ 3],\ tv\_scale\_e0);}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ btVector3\ vp\_e1\ =\ tv\_vertices[tv\_e1].lerp(tv\_vertices[(tv\_e1\ +\ 1)\ \%\ 3],\ tv\_scale\_e1);}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{comment}{//proyected\ intervals}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ GREAL\ isect\_u[]\ =\ \{up\_e0.dot(edge\_edge\_dir),\ up\_e1.dot(edge\_edge\_dir)\};}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ GREAL\ isect\_v[]\ =\ \{vp\_e0.dot(edge\_edge\_dir),\ vp\_e1.dot(edge\_edge\_dir)\};}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ sort\_isect(isect\_u[0],\ isect\_u[1],\ tu\_e0,\ tu\_e1,\ up\_e0,\ up\_e1);}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ sort\_isect(isect\_v[0],\ isect\_v[1],\ tv\_e0,\ tv\_e1,\ vp\_e0,\ vp\_e1);}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ midpoint\_u\ =\ 0.5f\ *\ (isect\_u[0]\ +\ isect\_u[1]);\ \ \textcolor{comment}{//\ midpoint}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ GREAL\ midpoint\_v\ =\ 0.5f\ *\ (isect\_v[0]\ +\ isect\_v[1]);\ \ \textcolor{comment}{//\ midpoint}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (midpoint\_u\ <\ midpoint\_v)}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isect\_u[1]\ >=\ isect\_v[1])\ \ \textcolor{comment}{//\ face\ U\ casts\ face\ V}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (isect\_v[0]\ <=\ isect\_u[0])\ \ \textcolor{comment}{//\ face\ V\ casts\ face\ U}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ closest\ points}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_u\ =\ up\_e1;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_v\ =\ vp\_e0;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ calc\ edges\ and\ separation}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isect\_u[1]\ +\ MIN\_EDGE\_EDGE\_DIS\ <\ isect\_v[0])\ \ \textcolor{comment}{//calc\ distance\ between\ two\ lines\ instead}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_aacd84291c8b391c4fe78cde568f27865}{SEGMENT\_COLLISION}}(}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tu\_vertices[tu\_e1],\ tu\_vertices[(tu\_e1\ +\ 1)\ \%\ 3],}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tv\_vertices[tv\_e0],\ tv\_vertices[(tv\_e0\ +\ 1)\ \%\ 3],}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_u,}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_v);}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ edge\_edge\_dir\ =\ closest\_point\_u\ -\/\ closest\_point\_v;}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_abddd1b010b51bfbbca0118e314e14d4b}{VEC\_LENGTH}}(edge\_edge\_dir,\ distances[2]);}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ edge\_edge\_dir\ *=\ 1.0f\ /\ distances[2];\ \ \textcolor{comment}{//\ normalize}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[2]\ =\ isect\_v[0]\ -\/\ isect\_u[1];\ \ \textcolor{comment}{//distance\ negative}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//edge\_edge\_dir\ *=\ -\/1.0f;\ //normal\ pointing\ from\ V\ to\ U}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isect\_v[1]\ >=\ isect\_u[1])\ \ \textcolor{comment}{//\ face\ V\ casts\ face\ U}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (isect\_u[0]\ <=\ isect\_v[0])\ \ \textcolor{comment}{//\ face\ U\ casts\ face\ V}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ closest\ points}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_u\ =\ up\_e0;}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_v\ =\ vp\_e1;}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ calc\ edges\ and\ separation}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isect\_v[1]\ +\ MIN\_EDGE\_EDGE\_DIS\ <\ isect\_u[0])\ \ \textcolor{comment}{//calc\ distance\ between\ two\ lines\ instead}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_aacd84291c8b391c4fe78cde568f27865}{SEGMENT\_COLLISION}}(}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tu\_vertices[tu\_e0],\ tu\_vertices[(tu\_e0\ +\ 1)\ \%\ 3],}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tv\_vertices[tv\_e1],\ tv\_vertices[(tv\_e1\ +\ 1)\ \%\ 3],}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_u,}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closest\_point\_v);}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ edge\_edge\_dir\ =\ closest\_point\_u\ -\/\ closest\_point\_v;}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_abddd1b010b51bfbbca0118e314e14d4b}{VEC\_LENGTH}}(edge\_edge\_dir,\ distances[2]);}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ edge\_edge\_dir\ *=\ 1.0f\ /\ distances[2];\ \ \textcolor{comment}{//\ normalize}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[2]\ =\ isect\_u[0]\ -\/\ isect\_v[1];\ \ \textcolor{comment}{//distance\ negative}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//edge\_edge\_dir\ *=\ -\/1.0f;\ //normal\ pointing\ from\ V\ to\ U}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 3;}
\DoxyCodeLine{00308\ \ \ \ \ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00311\ \ \ \ \ SIMD\_FORCE\_INLINE\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ae9c1727c7a906900043eab45b25cbf50}{triangle\_collision}}(}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&u0,}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&u1,}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&u2,}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ GREAL\ margin\_u,}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&v0,}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&v1,}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ btVector3\ \&v2,}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ GREAL\ margin\_v,}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_g_i_m___t_r_i_a_n_g_l_e___c_o_n_t_a_c_t___d_a_t_a}{GIM\_TRIANGLE\_CONTACT\_DATA}}\ \&contacts)}
\DoxyCodeLine{00321\ \ \ \ \ \{}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ margin\ =\ margin\_u\ +\ margin\_v;}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ tu\_vertices[0]\ =\ u0;}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ tu\_vertices[1]\ =\ u1;}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ tu\_vertices[2]\ =\ u2;}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ tv\_vertices[0]\ =\ v0;}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ tv\_vertices[1]\ =\ v1;}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ tv\_vertices[2]\ =\ v2;}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{comment}{//create\ planes}}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ plane\ v\ vs\ U\ points}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_a3a555c6ce6f2cba54d48cf5397616975}{TRIANGLE\_PLANE}}(tv\_vertices[0],\ tv\_vertices[1],\ tv\_vertices[2],\ tv\_plane);}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ du[0]\ =\ DISTANCE\_PLANE\_POINT(tv\_plane,\ tu\_vertices[0]);}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ du[1]\ =\ DISTANCE\_PLANE\_POINT(tv\_plane,\ tu\_vertices[1]);}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ du[2]\ =\ DISTANCE\_PLANE\_POINT(tv\_plane,\ tu\_vertices[2]);}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ du0du1\ =\ du[0]\ *\ du[1];}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ du0du2\ =\ du[0]\ *\ du[2];}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (du0du1\ >\ 0.0f\ \&\&\ du0du2\ >\ 0.0f)\ \ \textcolor{comment}{//\ same\ sign\ on\ all\ of\ them\ +\ not\ equal\ 0\ ?}}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (du[0]\ <\ 0)\ \ \textcolor{comment}{//we\ need\ test\ behind\ the\ triangle\ plane}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ GIM\_MAX3(du[0],\ du[1],\ du[2]);}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ -\/distances[0];}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[0]\ >\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//never\ intersect}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//reorder\ triangle\ v}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_a1627bf177f521a219326496e5028bb9e}{VEC\_SWAP}}(tv\_vertices[0],\ tv\_vertices[1]);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_ac77b8e88e6e280b2d073064bdb450a91}{VEC\_SCALE\_4}}(tv\_plane,\ -\/1.0f,\ tv\_plane);}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ GIM\_MIN3(du[0],\ du[1],\ du[2]);}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[0]\ >\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//never\ intersect}}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Look\ if\ we\ need\ to\ invert\ the\ triangle}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ (du[0]\ +\ du[1]\ +\ du[2])\ /\ 3.0f;\ \ \textcolor{comment}{//centroid}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[0]\ <\ 0.0f)}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//reorder\ triangle\ v}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_a1627bf177f521a219326496e5028bb9e}{VEC\_SWAP}}(tv\_vertices[0],\ tv\_vertices[1]);}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_ac77b8e88e6e280b2d073064bdb450a91}{VEC\_SCALE\_4}}(tv\_plane,\ -\/1.0f,\ tv\_plane);}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ GIM\_MAX3(du[0],\ du[1],\ du[2]);}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ -\/distances[0];}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[0]\ =\ GIM\_MIN3(du[0],\ du[1],\ du[2]);}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ plane\ U\ vs\ V\ points}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__basic__geometry__operations_8h_a3a555c6ce6f2cba54d48cf5397616975}{TRIANGLE\_PLANE}}(tu\_vertices[0],\ tu\_vertices[1],\ tu\_vertices[2],\ tu\_plane);}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ dv[0]\ =\ DISTANCE\_PLANE\_POINT(tu\_plane,\ tv\_vertices[0]);}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ dv[1]\ =\ DISTANCE\_PLANE\_POINT(tu\_plane,\ tv\_vertices[1]);}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ dv[2]\ =\ DISTANCE\_PLANE\_POINT(tu\_plane,\ tv\_vertices[2]);}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ dv0dv1\ =\ dv[0]\ *\ dv[1];}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ dv0dv2\ =\ dv[0]\ *\ dv[2];}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dv0dv1\ >\ 0.0f\ \&\&\ dv0dv2\ >\ 0.0f)\ \ \textcolor{comment}{//\ same\ sign\ on\ all\ of\ them\ +\ not\ equal\ 0\ ?}}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dv[0]\ <\ 0)\ \ \textcolor{comment}{//we\ need\ test\ behind\ the\ triangle\ plane}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ GIM\_MAX3(dv[0],\ dv[1],\ dv[2]);}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ -\/distances[1];}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[1]\ >\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//never\ intersect}}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//reorder\ triangle\ u}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_a1627bf177f521a219326496e5028bb9e}{VEC\_SWAP}}(tu\_vertices[0],\ tu\_vertices[1]);}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_ac77b8e88e6e280b2d073064bdb450a91}{VEC\_SCALE\_4}}(tu\_plane,\ -\/1.0f,\ tu\_plane);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ GIM\_MIN3(dv[0],\ dv[1],\ dv[2]);}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[1]\ >\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \textcolor{comment}{//never\ intersect}}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Look\ if\ we\ need\ to\ invert\ the\ triangle}}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ (dv[0]\ +\ dv[1]\ +\ dv[2])\ /\ 3.0f;\ \ \textcolor{comment}{//centroid}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[1]\ <\ 0.0f)}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//reorder\ triangle\ v}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_a1627bf177f521a219326496e5028bb9e}{VEC\_SWAP}}(tu\_vertices[0],\ tu\_vertices[1]);}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_ac77b8e88e6e280b2d073064bdb450a91}{VEC\_SCALE\_4}}(tu\_plane,\ -\/1.0f,\ tu\_plane);}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ GIM\_MAX3(dv[0],\ dv[1],\ dv[2]);}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ -\/distances[1];}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ distances[1]\ =\ GIM\_MIN3(dv[0],\ dv[1],\ dv[2]);}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ GUINT\ bl;}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ bl\ =\ cross\_line\_intersection\_test();}}
\DoxyCodeLine{00433\ \textcolor{comment}{\ \ \ \ \ \ \ \ if(bl==3)}}
\DoxyCodeLine{00434\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00435\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ //take\ edge\ direction\ too}}
\DoxyCodeLine{00436\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ bl\ =\ distances.maxAxis();}}
\DoxyCodeLine{00437\ \textcolor{comment}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00438\ \textcolor{comment}{\ \ \ \ \ \ \ \ else}}
\DoxyCodeLine{00439\ \textcolor{comment}{\ \ \ \ \ \ \ \ \{*/}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ bl\ =\ 0;}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[0]\ <\ distances[1])\ bl\ =\ 1;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bl\ ==\ 2)\ \ \textcolor{comment}{//edge\ edge\ separation}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distances[2]\ >\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.m\_penetration\_depth\ =\ -\/distances[2]\ +\ margin;}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.m\_points[0]\ =\ closest\_point\_v;}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.m\_point\_count\ =\ 1;}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gim__linear__math_8h_ab8018413588afb0cdef51bdca35eab54}{VEC\_COPY}}(contacts.m\_separating\_normal,\ edge\_edge\_dir);}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{comment}{//clip\ face\ against\ other}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ GUINT\ point\_count;}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \textcolor{comment}{//TODO}}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bl\ ==\ 0)\ \ \textcolor{comment}{//clip\ U\ points\ against\ V}}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ point\_count\ =\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac07d15d399c84583e1c5411a379f85bb}{clip\_triangle}}(tv\_plane,\ tv\_vertices,\ tu\_vertices,\ contact\_points);}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (point\_count\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.\mbox{\hyperlink{struct_g_i_m___t_r_i_a_n_g_l_e___c_o_n_t_a_c_t___d_a_t_a_a4d3e25d735f8e5111bb54dd764cbb041}{merge\_points}}(tv\_plane,\ margin,\ contact\_points,\ point\_count);}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \ \textcolor{comment}{//clip\ V\ points\ against\ U}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ point\_count\ =\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ac07d15d399c84583e1c5411a379f85bb}{clip\_triangle}}(tu\_plane,\ tu\_vertices,\ tv\_vertices,\ contact\_points);}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (point\_count\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.\mbox{\hyperlink{struct_g_i_m___t_r_i_a_n_g_l_e___c_o_n_t_a_c_t___d_a_t_a_a4d3e25d735f8e5111bb54dd764cbb041}{merge\_points}}(tu\_plane,\ margin,\ contact\_points,\ point\_count);}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.m\_separating\_normal\ *=\ -\/1.f;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (contacts.m\_point\_count\ ==\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00475\ \ \ \ \ \}}
\DoxyCodeLine{00476\ \};}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \textcolor{comment}{/*class\ GIM\_TRIANGLE\_CALCULATION\_CACHE}}
\DoxyCodeLine{00479\ \textcolor{comment}{\{}}
\DoxyCodeLine{00480\ \textcolor{comment}{public:}}
\DoxyCodeLine{00481\ \textcolor{comment}{\ \ \ \ GREAL\ margin;}}
\DoxyCodeLine{00482\ \textcolor{comment}{\ \ \ \ GUINT\ clipped\_count;}}
\DoxyCodeLine{00483\ \textcolor{comment}{\ \ \ \ btVector3\ tu\_vertices[3];}}
\DoxyCodeLine{00484\ \textcolor{comment}{\ \ \ \ btVector3\ tv\_vertices[3];}}
\DoxyCodeLine{00485\ \textcolor{comment}{\ \ \ \ btVector3\ temp\_points[MAX\_TRI\_CLIPPING];}}
\DoxyCodeLine{00486\ \textcolor{comment}{\ \ \ \ btVector3\ temp\_points1[MAX\_TRI\_CLIPPING];}}
\DoxyCodeLine{00487\ \textcolor{comment}{\ \ \ \ btVector3\ clipped\_points[MAX\_TRI\_CLIPPING];}}
\DoxyCodeLine{00488\ \textcolor{comment}{\ \ \ \ GIM\_TRIANGLE\_CONTACT\_DATA\ contacts1;}}
\DoxyCodeLine{00489\ \textcolor{comment}{\ \ \ \ GIM\_TRIANGLE\_CONTACT\_DATA\ contacts2;}}
\DoxyCodeLine{00490\ \textcolor{comment}{}}
\DoxyCodeLine{00491\ \textcolor{comment}{}}
\DoxyCodeLine{00493\ \ \ \ \ GUINT\ clip\_triangle(}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ const\ btVector4\ \&\ tri\_plane,}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ const\ btVector3\ *\ tripoints,}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ const\ btVector3\ *\ srcpoints,}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ btVector3\ *\ clipped\_points)}
\DoxyCodeLine{00498\ \ \ \ \ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ //\ edge\ 0}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ btVector4\ edgeplane;}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ EDGE\_PLANE(tripoints[0],tripoints[1],tri\_plane,edgeplane);}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ GUINT\ clipped\_count\ =\ PLANE\_CLIP\_TRIANGLE3D(}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,srcpoints[0],srcpoints[1],srcpoints[2],temp\_points);}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0)\ return\ 0;}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ //\ edge\ 1}
\DoxyCodeLine{00511\ }
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ EDGE\_PLANE(tripoints[1],tripoints[2],tri\_plane,edgeplane);}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON3D(}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,temp\_points,clipped\_count,temp\_points1);}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0)\ return\ 0;}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ //\ edge\ 2}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ EDGE\_PLANE(tripoints[2],tripoints[0],tri\_plane,edgeplane);}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ clipped\_count\ =\ PLANE\_CLIP\_POLYGON3D(}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ edgeplane,temp\_points1,clipped\_count,clipped\_points);}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ return\ clipped\_count;}
\DoxyCodeLine{00527\ \ \ \ \ \}}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00533\ \ \ \ \ bool\ triangle\_collision(}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ u0,}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ u1,}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ u2,}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GREAL\ margin\_u,}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ v0,}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ v1,}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ btVector3\ \&\ v2,}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GREAL\ margin\_v,}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GIM\_TRIANGLE\_CONTACT\_DATA\ \&\ contacts)}
\DoxyCodeLine{00543\ \ \ \ \ \{}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ margin\ =\ margin\_u\ +\ margin\_v;}
\DoxyCodeLine{00546\ }
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ tu\_vertices[0]\ =\ u0;}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ tu\_vertices[1]\ =\ u1;}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ tu\_vertices[2]\ =\ u2;}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ tv\_vertices[0]\ =\ v0;}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ tv\_vertices[1]\ =\ v1;}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ tv\_vertices[2]\ =\ v2;}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ //create\ planes}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ //\ plane\ v\ vs\ U\ points}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ TRIANGLE\_PLANE(tv\_vertices[0],tv\_vertices[1],tv\_vertices[2],contacts1.m\_separating\_normal);}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ clipped\_count\ =\ clip\_triangle(}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ contacts1.m\_separating\_normal,tv\_vertices,tu\_vertices,clipped\_points);}
\DoxyCodeLine{00564\ }
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0\ )}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ false;//Reject}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00569\ }
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ //find\ most\ deep\ interval\ face1}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ contacts1.merge\_points(contacts1.m\_separating\_normal,margin,clipped\_points,clipped\_count);}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ if(contacts1.m\_point\_count\ ==\ 0)\ return\ false;\ //\ too\ far}
\DoxyCodeLine{00573\ }
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ //Normal\ pointing\ to\ triangle1}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ //contacts1.m\_separating\_normal\ *=\ -\/1.f;}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ //Clip\ tri1\ by\ tri2\ edges}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ TRIANGLE\_PLANE(tu\_vertices[0],tu\_vertices[1],tu\_vertices[2],contacts2.m\_separating\_normal);}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ clipped\_count\ =\ clip\_triangle(}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ contacts2.m\_separating\_normal,tu\_vertices,tv\_vertices,clipped\_points);}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ if(clipped\_count\ ==\ 0\ )}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ false;//Reject}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ //find\ most\ deep\ interval\ face1}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ contacts2.merge\_points(contacts2.m\_separating\_normal,margin,clipped\_points,clipped\_count);}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ if(contacts2.m\_point\_count\ ==\ 0)\ return\ false;\ //\ too\ far}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ contacts2.m\_separating\_normal\ *=\ -\/1.f;}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ if(contacts2.m\_penetration\_depth<contacts1.m\_penetration\_depth)}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.copy\_from(contacts2);}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ else}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ contacts.copy\_from(contacts1);}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ return\ true;}
\DoxyCodeLine{00605\ \ \ \ \ \}}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \};*/}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e_a60a6a90dccfd5f81663088847fbfae34}{GIM\_TRIANGLE::collide\_triangle\_hard\_test}}(}
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e}{GIM\_TRIANGLE}}\ \&other,}
\DoxyCodeLine{00612\ \ \ \ \ \mbox{\hyperlink{struct_g_i_m___t_r_i_a_n_g_l_e___c_o_n_t_a_c_t___d_a_t_a}{GIM\_TRIANGLE\_CONTACT\_DATA}}\ \&contact\_data)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00613\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00614\ \ \ \ \ \mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e}{GIM\_TRIANGLE\_CALCULATION\_CACHE}}\ calc\_cache;}
\DoxyCodeLine{00615\ \ \ \ \ \textcolor{keywordflow}{return}\ calc\_cache.\mbox{\hyperlink{class_g_i_m___t_r_i_a_n_g_l_e___c_a_l_c_u_l_a_t_i_o_n___c_a_c_h_e_ae9c1727c7a906900043eab45b25cbf50}{triangle\_collision}}(}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ m\_vertices[0],\ m\_vertices[1],\ m\_vertices[2],\ m\_margin,}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ other.m\_vertices[0],\ other.m\_vertices[1],\ other.m\_vertices[2],\ other.m\_margin,}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ contact\_data);}
\DoxyCodeLine{00619\ \}}

\end{DoxyCode}
